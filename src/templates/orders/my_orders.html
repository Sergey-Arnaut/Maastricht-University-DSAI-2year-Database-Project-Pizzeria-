{% extends "base.html" %}
{% block title %}My orders{% endblock %}
{% block content %}
<h1>My orders</h1>
<p class="text-muted">You can cancel orders within {{ cancel_window }} minutes if not yet delivered.</p>
<table class="table table-sm">
  <thead><tr><th>#</th><th>Status</th><th>Total (€)</th><th>Placed</th><th>Action</th></tr></thead>
  <tbody>
  {% for order, cancellable, minutes_left in orders %}
    <tr>
      <td>{{ order.order_id }}</td>
      <td>{{ order.status }}</td>
      <td>{{ order.total_price }}</td>
      <td>{{ order.order_timestamp }}</td>
      <td>
        {% if cancellable %}
          <form method="post" action="{% url 'cancel_order' order.order_id %}">
            {% csrf_token %}
            <button class="btn btn-outline-danger btn-sm">Cancel ({{ minutes_left }}m left)</button>
          </form>
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="5" class="text-muted">No orders yet.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
